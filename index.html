<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<main>  This is my title </main>
<head>
  <style>
  .button {
    border: none;
    background-color: white;
    color: black;
    border: 2px solid grey;
    padding: 16px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    transition-duration: 0.4s;
    cursor: pointer;
  }
  .button:hover {
  background-color: grey;
  color: white;
}
  </style>
</head>
<body onload='init()'>
<svg width=300 height=300>
</svg>
<button class="button" onclick="disag_ag()" id = "button1" >Agregate</button>
<script>
const btn_name_change = document.getElementById('button1');
btn_name_change.addEventListener('click', function change_name(){
  if(btn_name_change.textContent.includes("Disaggregate")){
    btn_name_change.innerHTML = '<span>Aggregate</span>'
  }
  else {
    btn_name_change.innerHTML = "<span>Disaggregate</span>"
  }
})
var disag = 0
const data = [1, 2, 3, 4, 5];
const cum_data = [1, 3, 6, 10, 15];
const other_data = [15, 13, 8, 4, 2];
const cum_other_data = [15, 28, 36, 40, 42]
const disag_text = ["one", "two", "three", "four", "five"]
var x = d3.scaleLinear().domain([0,5]).range([0,300]);
var y = d3.scaleLinear().domain([0,42]).range([300,0]);
function init() {
d3.select("svg")
  .append("g")
  .selectAll().data(data).enter().append('rect')
  .classed("male", true)
  .style("stroke", "lightblue")
  .style("fill", "lightblue")
  .attr("x", 0)
  .attr("y",function(d,i){ return y(cum_data[i]) })
  .attr("width",30)
  .attr("height", function(d,i){ return 300-y(d)})
  .transition()
  .duration(200)
  .style("stroke", "black")
  .transition()
  .duration(500)
  .attr("x",function(d,i){ return x(i); })
  .attr("y",function(d,i){ return y(d); });
d3.select("svg")
  .append("g")
  .selectAll().data(other_data).enter().append('rect')
  .classed("female", true)
  .style("stroke", "pink")
  .style("fill", "pink")
  .attr("x",30)
  .attr("y",function(d,i){ return y(cum_other_data[i]) })
  .attr("width",30)
  .attr("height", function(d,i){ return 300-y(other_data[i])})
  .transition()
  .duration(200)
  .style("stroke", "black")
  .transition()
  .duration(500)
  .attr("x",function(d,i){ return 30+x(i); })
  .attr("y",function(d,i){ return y(other_data[i]); });
}
function disag_ag() {
  if (disag == 0){
  d3.select("svg")
    .selectAll("rect")
    .filter(".male", true).data(data)
    .transition()
    .duration(200)
    .style("stroke", "lightblue")
    .attr("x", 0)
    .attr("y",function(d,i){ return y(cum_data[i]) });
  d3.select("svg")
    .selectAll("rect")
    .filter(".female", true).data(other_data)
    .transition()
    .duration(200)
    .style("stroke", "pink")
    .attr("x",30)
    .attr("y",function(d,i){ return y(cum_other_data[i]) });
  }
  if (disag == 1){
  d3.select("svg")
    .selectAll("rect")
    .filter(".male", true).data(data)
    .transition()
    .duration(200)
    .style("stroke", "black")
    .attr("x",function(d,i){ return x(i); })
    .attr("y",function(d,i){ return y(d); });
  d3.select("svg")
    .selectAll("rect")
    .filter(".female", true).data(other_data)
    .transition()
    .duration(200)
    .style("stroke", "black")
    .attr("x",function(d,i){ return 30+x(i); })
    .attr("y",function(d,i){ return y(other_data[i]); });
  }
  disag = (disag+1)%2
  console.log(disag)
}
</script>
</body>
</html>
